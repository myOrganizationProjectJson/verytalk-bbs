/*
 * TouchSlide v1.1
 * javascript触屏滑动特效插件，移动端滑动特效，触屏焦点图，触屏Tab切换，触屏多图切换等
 * 详尽信息请看官网：http://www.SuperSlide2.com/TouchSlide/
 *
 * Copyright 2013 大话主席
 *
 * 请尊重原创，保留头部版权
 * 在保留版权的前提下可应用于个人或商业用途

 * 1.1 宽度自适应（修复安卓横屏时滑动范围不变的bug）
 */
var TouchSlide=function(AO){AO=AO||{};var AP={slideCell:AO.slideCell||"#touchSlide",titCell:AO.titCell||".hd li",mainCell:AO.mainCell||".bd",effect:AO.effect||"left",autoPlay:AO.autoPlay||!1,delayTime:AO.delayTime||200,interTime:AO.interTime||2500,defaultIndex:AO.defaultIndex||0,titOnClassName:AO.titOnClassName||"on",autoPage:AO.autoPage||!1,prevCell:AO.prevCell||".prev",nextCell:AO.nextCell||".next",pageStateCell:AO.pageStateCell||".pageState",pnLoop:"undefined "==AO.pnLoop?!0:AO.pnLoop,startFun:AO.startFun||null,endFun:AO.endFun||null,switchLoad:AO.switchLoad||null},AQ=document.getElementById(AP.slideCell.replace("#",""));if(!AQ){return !1}var AR=function(C,D){C=C.split(" ");var E=[];D=D||document;var G=[D];for(var H in C){0!=C[H].length&&E.push(C[H])}for(var H in E){if(0==G.length){return !1}var I=[];for(var J in G){if("#"==E[H][0]){I.push(document.getElementById(E[H].replace("#","")))}else{if("."==E[H][0]){for(var K=G[J].getElementsByTagName("*"),A=0;A<K.length;A++){var B=K[A].className;B&&-1!=B.search(new RegExp("\\b"+E[H].replace(".","")+"\\b"))&&I.push(K[A])}}else{for(var K=G[J].getElementsByTagName(E[H]),A=0;A<K.length;A++){I.push(K[A])}}}}G=I}return 0==G.length||G[0]==D?!1:G},AS=function(A,B){var C=document.createElement("div");C.innerHTML=B,C=C.children[0];var D=A.cloneNode(!0);return C.appendChild(D),A.parentNode.replaceChild(C,A),AL=D,C},AT=function(A,B){!A||!B||A.className&&-1!=A.className.search(new RegExp("\\b"+B+"\\b"))||(A.className+=(A.className?" ":"")+B)},AG=function(A,B){!A||!B||A.className&&-1==A.className.search(new RegExp("\\b"+B+"\\b"))||(A.className=A.className.replace(new RegExp("\\s*\\b"+B+"\\b","g"),""))},AH=AP.effect,AI=AR(AP.prevCell,AQ)[0],AJ=AR(AP.nextCell,AQ)[0],AK=AR(AP.pageStateCell)[0],AL=AR(AP.mainCell,AQ)[0];if(!AL){return !1}var An,Ao,AM=AL.children.length,AN=AR(AP.titCell,AQ),Ay=AN?AN.length:AM,Az=AP.switchLoad,AA=parseInt(AP.defaultIndex),AB=parseInt(AP.delayTime),AC=parseInt(AP.interTime),AD="false"==AP.autoPlay||0==AP.autoPlay?!1:!0,AE="false"==AP.autoPage||0==AP.autoPage?!1:!0,AF="false"==AP.pnLoop||0==AP.pnLoop?!1:!0,Av=AA,Aw=null,Ax=null,Ap=null,Aq=0,Ar=0,As=0,At=0,Au=/hp-tablet/gi.test(navigator.appVersion),Ai="ontouchstart" in window&&!Au,Aj=Ai?"touchstart":"mousedown",Ak=Ai?"touchmove":"",Al=Ai?"touchend":"mouseup",Am=AL.parentNode.clientWidth,Aa=AM;if(0==Ay&&(Ay=AM),AE){Ay=AM,AN=AN[0],AN.innerHTML="";var Ab="";if(1==AP.autoPage||"true"==AP.autoPage){for(var Ac=0;Ay>Ac;Ac++){Ab+="<li>"+(Ac+1)+"</li>"}}else{for(var Ac=0;Ay>Ac;Ac++){Ab+=AP.autoPage.replace("$",Ac+1)}}AN.innerHTML=Ab,AN=AN.children}"leftLoop"==AH&&(Aa+=2,AL.appendChild(AL.children[0].cloneNode(!0)),AL.insertBefore(AL.children[AM-1].cloneNode(!0),AL.children[0])),An=AS(AL,'<div class="tempWrap" style="overflow:hidden; position:relative;"></div>'),AL.style.cssText="width:"+Aa*Am+"px;position:relative;overflow:hidden;padding:0;margin:0;";for(var Ac=0;Aa>Ac;Ac++){AL.children[Ac].style.cssText="display:table-cell;vertical-align:top;width:"+Am+"px"}var Ad=function(){"function"==typeof AP.startFun&&AP.startFun(AA,Ay)},Ae=function(){"function"==typeof AP.endFun&&AP.endFun(AA,Ay)},Af=function(A){var B=("leftLoop"==AH?AA+1:AA)+A,C=function(D){for(var E=AL.children[D].getElementsByTagName("img"),G=0;G<E.length;G++){E[G].getAttribute(Az)&&(E[G].setAttribute("src",E[G].getAttribute(Az)),E[G].removeAttribute(Az))}};if(C(B),"leftLoop"==AH){switch(B){case 0:C(AM);break;case 1:C(AM+1);break;case AM:C(0);break;case AM+1:C(1)}}},Ag=function(){Am=An.clientWidth,AL.style.width=Aa*Am+"px";for(var A=0;Aa>A;A++){AL.children[A].style.width=Am+"px"}var B="leftLoop"==AH?AA+1:AA;Ah(-B*Am,0)};window.addEventListener("resize",Ag,!1);var Ah=function(A,B,C){C=C?C.style:AL.style,C.webkitTransitionDuration=C.MozTransitionDuration=C.msTransitionDuration=C.OTransitionDuration=C.transitionDuration=B+"ms",C.webkitTransform="translate("+A+"px,0)translateZ(0)",C.msTransform=C.MozTransform=C.OTransform="translateX("+A+"px)"},F=function(A){switch(AH){case"left":AA>=Ay?AA=A?AA-1:0:0>AA&&(AA=A?0:Ay-1),null!=Az&&Af(0),Ah(-AA*Am,AB),Av=AA;break;case"leftLoop":null!=Az&&Af(0),Ah(-(AA+1)*Am,AB),-1==AA?(Ax=setTimeout(function(){Ah(-Ay*Am,0)},AB),AA=Ay-1):AA==Ay&&(Ax=setTimeout(function(){Ah(-Am,0)},AB),AA=0),Av=AA}Ad(),Ap=setTimeout(function(){Ae()},AB);for(var B=0;Ay>B;B++){AG(AN[B],AP.titOnClassName),B==AA&&AT(AN[B],AP.titOnClassName)}0==AF&&(AG(AJ,"nextStop"),AG(AI,"prevStop"),0==AA?AT(AI,"prevStop"):AA==Ay-1&&AT(AJ,"nextStop")),AK&&(AK.innerHTML="<span>"+(AA+1)+"</span>/"+Ay)};if(F(),AD&&(Aw=setInterval(function(){AA++,F()},AC)),AN){for(var Ac=0;Ay>Ac;Ac++){!function(){var A=Ac;AN[A].addEventListener("click",function(){clearTimeout(Ax),clearTimeout(Ap),AA=A,F()})}()}}AJ&&AJ.addEventListener("click",function(){(1==AF||AA!=Ay-1)&&(clearTimeout(Ax),clearTimeout(Ap),AA++,F())}),AI&&AI.addEventListener("click",function(){(1==AF||0!=AA)&&(clearTimeout(Ax),clearTimeout(Ap),AA--,F())});var L=function(A){clearTimeout(Ax),clearTimeout(Ap),Ao=void 0,As=0;var B=Ai?A.touches[0]:A;Aq=B.pageX,Ar=B.pageY,AL.addEventListener(Ak,f,!1),AL.addEventListener(Al,AU,!1)},f=function(A){if(!Ai||!(A.touches.length>1||A.scale&&1!==A.scale)){var B=Ai?A.touches[0]:A;if(As=B.pageX-Aq,At=B.pageY-Ar,"undefined"==typeof Ao&&(Ao=!!(Ao||Math.abs(As)<Math.abs(At))),!Ao){switch(A.preventDefault(),AD&&clearInterval(Aw),AH){case"left":(0==AA&&As>0||AA>=Ay-1&&0>As)&&(As=0.4*As),Ah(-AA*Am+As,0);break;case"leftLoop":Ah(-(AA+1)*Am+As,0)}null!=Az&&Math.abs(As)>Am/3&&Af(As>-0?-1:1)}}},AU=function(A){0!=As&&(A.preventDefault(),Ao||(Math.abs(As)>Am/10&&(As>0?AA--:AA++),F(!0),AD&&(Aw=setInterval(function(){AA++,F()},AC))),AL.removeEventListener(Ak,f,!1),AL.removeEventListener(Al,AU,!1))};AL.addEventListener(Aj,L,!1)};